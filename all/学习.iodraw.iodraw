<mxGraphModel dx="2844" dy="1472" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="10000" pageHeight="10000" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="ey-oF8YSq9swC0SQ6pQ9-1" value="学习页面" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1862.5" y="320" width="120" height="60" as="geometry"/></mxCell><mxCell id="ey-oF8YSq9swC0SQ6pQ9-6" value="MQ" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;" parent="1" vertex="1"><mxGeometry x="1892.5" y="1030" width="60" height="80" as="geometry"/></mxCell><mxCell id="ey-oF8YSq9swC0SQ6pQ9-7" value="" style="shape=datastore;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1892.5" y="1590" width="60" height="60" as="geometry"/></mxCell><mxCell id="ey-oF8YSq9swC0SQ6pQ9-8" value="&lt;font color=&quot;#ff3333&quot;&gt;MQ&lt;/font&gt;" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;rotation=0;labelBorderColor=none;labelBackgroundColor=none;strokeColor=#FF3333;" parent="1" vertex="1"><mxGeometry x="1260" y="1340" width="60" height="80" as="geometry"/></mxCell><mxCell id="ey-oF8YSq9swC0SQ6pQ9-9" value="" style="shape=datastore;whiteSpace=wrap;html=1;labelBorderColor=#FF3333;strokeColor=#FF3333;" parent="1" vertex="1"><mxGeometry x="1260" y="1740" width="60" height="60" as="geometry"/></mxCell><mxCell id="ey-oF8YSq9swC0SQ6pQ9-11" value="&lt;span&gt;班型目录信息缓存(版本号，目录)&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1287.5" y="670" width="190" height="40" as="geometry"/></mxCell><mxCell id="ey-oF8YSq9swC0SQ6pQ9-12" value="&lt;span&gt;素材记录(班型目录版本号、素材版本号、记录版本号，素材进度、答题结果、当前日志id)&lt;br&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="2310" y="800" width="290" height="55" as="geometry"/></mxCell><mxCell id="ey-oF8YSq9swC0SQ6pQ9-13" value="素材日志(日志版本号、日志进度)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="2355" y="670" width="200" height="60" as="geometry"/></mxCell><mxCell id="ey-oF8YSq9swC0SQ6pQ9-14" value="6. 比较版本号是否发送变化，计算学习进度相关数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1800" y="800" width="245" height="60" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-3" value="&lt;span&gt;视频、章节练习、模拟试卷缓存(版本号，素材信息)&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1240" y="805" width="285" height="40" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-4" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.008;entryY=0.383;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-11" target="ey-oF8YSq9swC0SQ6pQ9-14"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1810" y="990" as="sourcePoint"/><mxPoint x="1860" y="940" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-13" value="2. 读取目录缓存" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-4"><mxGeometry x="-0.2559" y="-1" relative="1" as="geometry"><mxPoint x="1" as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-5" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-3" target="ey-oF8YSq9swC0SQ6pQ9-14"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1810" y="990" as="sourcePoint"/><mxPoint x="1923" y="799" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-18" value="3. 读取素材缓存" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-5"><mxGeometry x="-0.2219" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-20" value="" style="endArrow=classic;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-12" target="ey-oF8YSq9swC0SQ6pQ9-14"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="2140" y="940" as="sourcePoint"/><mxPoint x="2190" y="890" as="targetPoint"/><Array as="points"><mxPoint x="2200" y="790"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-23" value="4. 读取素材记录缓存" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-20"><mxGeometry x="-0.3171" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-21" value="" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-1" target="ey-oF8YSq9swC0SQ6pQ9-14"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1910" y="690" as="sourcePoint"/><mxPoint x="1960" y="700" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-22" value="1. 根据日志id写入学习日志" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-21"><mxGeometry x="-0.2857" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-24" value="" style="endArrow=classic;html=1;" edge="1" parent="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="2050" y="828" as="sourcePoint"/><mxPoint x="2310" y="828" as="targetPoint"/><Array as="points"><mxPoint x="2210" y="920"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-25" value="7. 以当前日志id作为乐观锁写入新的学习进度到素材记录" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1"><mxGeometry x="2094" y="896" width="310" height="20" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-26" value="" style="endArrow=classic;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-13" target="ey-oF8YSq9swC0SQ6pQ9-14"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="2150" y="730" as="sourcePoint"/><mxPoint x="2200" y="680" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-27" value="5. 读取素材日志缓存" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-26"><mxGeometry x="-0.3492" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-28" value="" style="endArrow=classic;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-14" target="ey-oF8YSq9swC0SQ6pQ9-13"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="2050" y="820" as="sourcePoint"/><mxPoint x="2240" y="680" as="targetPoint"/><Array as="points"><mxPoint x="2160" y="640"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-29" value="8.学习日志写入成功后写入新的日志进度到素材日志缓存" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-28"><mxGeometry x="-0.3383" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-30" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-14" target="ey-oF8YSq9swC0SQ6pQ9-6"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="2050" y="1030" as="sourcePoint"/><mxPoint x="2100" y="980" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-31" value="9. 打包素材记录与素材日志，写入mq" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-30"><mxGeometry x="0.3176" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-32" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-6" target="R5F-jyJuNegEA1YtVJ6C-33"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1900" y="1200" as="sourcePoint"/><mxPoint x="1950" y="1150" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-33" value="消费MQ" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1862.5" y="1230" width="120" height="60" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-34" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-33" target="ey-oF8YSq9swC0SQ6pQ9-7"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1600" y="1440" as="sourcePoint"/><mxPoint x="1810" y="1380" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-35" value="通过版本号更新素材记录和素材日志(只保留版本号最新的数据)，写入错题数据" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-34"><mxGeometry x="-0.34" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-36" value="" style="endArrow=classic;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-33" target="ey-oF8YSq9swC0SQ6pQ9-8"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1690" y="1300" as="sourcePoint"/><mxPoint x="1560" y="1330" as="targetPoint"/><Array as="points"><mxPoint x="1450" y="1110"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-42" value="如果有素材记录从未完成变成已完成，发送一条消息触发重新计算学生课程学习进度" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-36"><mxGeometry x="0.5143" relative="1" as="geometry"><mxPoint x="158.33" as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-38" value="重新计算学生课程学习进度" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#FF3333;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="1210" y="1550" width="160" height="60" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-39" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;labelBorderColor=#FF3333;strokeColor=#FF3333;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-38" target="ey-oF8YSq9swC0SQ6pQ9-9"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1290" y="1610" as="sourcePoint"/><mxPoint x="890" y="1250" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-41" value="通过乐观锁更新学生课程学习进度" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#FF3333;labelBorderColor=#FF3333;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-39"><mxGeometry x="-0.46" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-40" value="" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;labelBorderColor=#FF3333;strokeColor=#FF3333;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-8" target="R5F-jyJuNegEA1YtVJ6C-38"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="970" y="1440" as="sourcePoint"/><mxPoint x="1290" y="1550" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-43" value="&lt;font color=&quot;#0000ff&quot;&gt;MQ&lt;/font&gt;" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;labelBackgroundColor=none;fontColor=#FF3333;rotation=90;strokeColor=#0000FF;" vertex="1" parent="1"><mxGeometry x="500" y="940" width="60" height="80" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-44" value="&lt;font color=&quot;#0000ff&quot;&gt;班型目录信息变更&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontColor=#FF3333;strokeColor=#0000FF;" vertex="1" parent="1"><mxGeometry x="230" y="950" width="120" height="60" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-45" value="&lt;font color=&quot;#e89b00&quot;&gt;素材信息变更&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontColor=#FF3333;strokeColor=#E89B00;" vertex="1" parent="1"><mxGeometry x="230" y="1260" width="120" height="60" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-46" value="" style="endArrow=classic;html=1;fontColor=#FF3333;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#0000FF;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-44" target="R5F-jyJuNegEA1YtVJ6C-43"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="680" y="1180" as="sourcePoint"/><mxPoint x="730" y="1130" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-47" value="&lt;font color=&quot;#0000ff&quot;&gt;消费MQ&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontColor=#FF3333;strokeColor=#0000FF;" vertex="1" parent="1"><mxGeometry x="720" y="950" width="120" height="60" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-48" value="" style="endArrow=classic;html=1;fontColor=#FF3333;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#0000FF;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-47" target="ey-oF8YSq9swC0SQ6pQ9-11"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1090" y="930" as="sourcePoint"/><mxPoint x="1140" y="880" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-50" value="1. 通过乐观锁更新班型目录信息缓存" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#0000FF;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-48"><mxGeometry x="-0.4154" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-51" value="" style="endArrow=classic;html=1;fontColor=#FF3333;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#0000FF;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-47" target="ey-oF8YSq9swC0SQ6pQ9-8"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1010" y="1080" as="sourcePoint"/><mxPoint x="1160" y="1100" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-52" value="2. 查询所有学习过该班型目录的学生并且版本号小于当前版本版本号，给每个学生生成一条消息触发重新计算学生课程学习进度&amp;nbsp; &amp;nbsp;(暂停2s)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#0000FF;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-51"><mxGeometry x="-0.4919" y="-1" relative="1" as="geometry"><mxPoint x="-1" as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-53" value="" style="endArrow=classic;html=1;fontColor=#FF3333;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeColor=#0000FF;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-43" target="R5F-jyJuNegEA1YtVJ6C-47"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="550" y="890" as="sourcePoint"/><mxPoint x="600" y="840" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-54" value="&lt;font color=&quot;#e89b00&quot;&gt;MQ&lt;/font&gt;" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;labelBackgroundColor=none;fontColor=#0000FF;rotation=90;strokeColor=#E89B00;" vertex="1" parent="1"><mxGeometry x="500" y="1250" width="60" height="80" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-55" value="" style="endArrow=classic;html=1;fontColor=#0000FF;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#E89B00;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-45" target="R5F-jyJuNegEA1YtVJ6C-54"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="300" y="1440" as="sourcePoint"/><mxPoint x="350" y="1390" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-56" value="" style="endArrow=classic;html=1;fontColor=#0000FF;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#E89B00;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-57" target="R5F-jyJuNegEA1YtVJ6C-3"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="640" y="1300" as="sourcePoint"/><mxPoint x="690" y="1250" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-58" value="&lt;font&gt;1. 通过乐观锁更新素材信息缓存&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#E89B00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-56"><mxGeometry x="-0.6301" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-57" value="&lt;font color=&quot;#e89b00&quot;&gt;消费MQ&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontColor=#0000FF;strokeColor=#E89B00;" vertex="1" parent="1"><mxGeometry x="680" y="1260" width="120" height="60" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-59" value="" style="endArrow=classic;html=1;fontColor=#0000FF;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeColor=#E89B00;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-54" target="R5F-jyJuNegEA1YtVJ6C-57"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="550" y="1450" as="sourcePoint"/><mxPoint x="600" y="1400" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-60" value="&lt;font color=&quot;#e89b00&quot;&gt;MQ&lt;/font&gt;" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;labelBackgroundColor=none;fontColor=#0000FF;strokeColor=#E89B00;" vertex="1" parent="1"><mxGeometry x="710" y="1490" width="60" height="80" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-63" value="" style="endArrow=classic;html=1;fontColor=#0000FF;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#E89B00;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-57" target="R5F-jyJuNegEA1YtVJ6C-60"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="510" y="1480" as="sourcePoint"/><mxPoint x="560" y="1430" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-64" value="&lt;font&gt;2. 查询所有学习过该素材的学生并且版本号小于当前版本版本号，给每个学生生成一条消息触发重新计算学生素材学习进度&amp;nbsp; &amp;nbsp;(暂停2s)&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#E89B00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-63"><mxGeometry x="0.2" y="1" relative="1" as="geometry"><mxPoint x="9" y="-62" as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-65" value="&lt;font color=&quot;#e89b00&quot;&gt;重新计算学习素材的完成率&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontColor=#0000FF;strokeColor=#E89B00;" vertex="1" parent="1"><mxGeometry x="660" y="1790" width="160" height="60" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-66" value="" style="endArrow=classic;html=1;fontColor=#0000FF;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#E89B00;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-60" target="R5F-jyJuNegEA1YtVJ6C-65"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="540" y="1630" as="sourcePoint"/><mxPoint x="590" y="1580" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-67" value="" style="endArrow=classic;html=1;fontColor=#0000FF;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#E89B00;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-65" target="ey-oF8YSq9swC0SQ6pQ9-6"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="910" y="1710" as="sourcePoint"/><mxPoint x="1790" y="1090" as="targetPoint"/><Array as="points"><mxPoint x="1320" y="920"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-69" value="&lt;font color=&quot;#e89b00&quot;&gt;1. 素材进度发生了变化则更新素材记录的进度&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#FF00FF;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-67"><mxGeometry x="-0.8141" y="1" relative="1" as="geometry"><mxPoint x="100.14" y="-97.64" as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-70" value="" style="endArrow=classic;html=1;fontColor=#FF00FF;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.4;entryY=0.013;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#E89B00;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-65" target="ey-oF8YSq9swC0SQ6pQ9-8"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="930" y="1860" as="sourcePoint"/><mxPoint x="1130" y="1310" as="targetPoint"/><Array as="points"><mxPoint x="940" y="1230"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-71" value="&lt;font color=&quot;#e89b00&quot;&gt;2. 素材由已完成变成未完成或未完成变成已完成&lt;br&gt;则生成一条消息触发重新计算该学生课程学习进度&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#FF00FF;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-70"><mxGeometry x="-0.4852" y="1" relative="1" as="geometry"><mxPoint x="41.55" y="-96.78" as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-72" value="&lt;font color=&quot;#00ff00&quot;&gt;4. 比较素材记录中的素材版本号和最新素材的版本号是否相同&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=none;fontColor=#E89B00;strokeColor=#00FF00;" vertex="1" parent="1"><mxGeometry x="1110" y="310" width="200" height="60" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-73" value="" style="endArrow=classic;html=1;fontColor=#E89B00;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#00FF00;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-11" target="R5F-jyJuNegEA1YtVJ6C-72"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1070" y="630" as="sourcePoint"/><mxPoint x="1120" y="580" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-75" value="&lt;font color=&quot;#00ff00&quot;&gt;1. 读取班型目录缓存&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#E89B00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-73"><mxGeometry x="-0.2415" relative="1" as="geometry"><mxPoint x="1" as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-74" value="" style="endArrow=classic;html=1;strokeColor=#00FF00;fontColor=#E89B00;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-3" target="R5F-jyJuNegEA1YtVJ6C-72"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="990" y="610" as="sourcePoint"/><mxPoint x="1040" y="560" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-76" value="2. 读取素材缓存" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#00FF00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-74"><mxGeometry x="-0.1381" y="3" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-77" value="" style="endArrow=classic;html=1;strokeColor=#00FF00;fontColor=#00FF00;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-12" target="R5F-jyJuNegEA1YtVJ6C-72"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1450" y="570" as="sourcePoint"/><mxPoint x="1500" y="520" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-78" value="3. 读取素材记录" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#00FF00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-77"><mxGeometry x="0.4757" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-79" value="" style="endArrow=classic;html=1;strokeColor=#00FF00;fontColor=#00FF00;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-72" target="ey-oF8YSq9swC0SQ6pQ9-6"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1330" y="470" as="sourcePoint"/><mxPoint x="1600" y="570" as="targetPoint"/><Array as="points"><mxPoint x="1750" y="420"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-80" value="5. 素材版本号和素材记录版本号不相同则重新计算素材进度并更新素材进度" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#00FF00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-79"><mxGeometry x="-0.3908" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-82" value="" style="endArrow=classic;html=1;strokeColor=#00FF00;fontColor=#00FF00;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-72" target="ey-oF8YSq9swC0SQ6pQ9-13"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1320" y="340" as="sourcePoint"/><mxPoint x="1920" y="90" as="targetPoint"/><Array as="points"><mxPoint x="1620" y="120"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-85" value="7. 生成最新素材日志缓存" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#00FF00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-82"><mxGeometry x="-0.4344" y="-80" relative="1" as="geometry"><mxPoint x="109" y="-17" as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-83" value="" style="endArrow=classic;html=1;strokeColor=#00FF00;fontColor=#00FF00;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-72" target="ey-oF8YSq9swC0SQ6pQ9-12"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1650" y="330" as="sourcePoint"/><mxPoint x="2480" y="1300" as="targetPoint"/><Array as="points"><mxPoint x="1940" y="210"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-84" value="6. 重新写入最新版本号和最新进度、最新日志id" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#00FF00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-83"><mxGeometry x="-0.7157" y="3" relative="1" as="geometry"><mxPoint y="1" as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-86" value="" style="endArrow=classic;html=1;strokeColor=#00FF00;fontColor=#00FF00;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-72" target="ey-oF8YSq9swC0SQ6pQ9-1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1350" y="150" as="sourcePoint"/><mxPoint x="1400" y="100" as="targetPoint"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-87" value="8. 进入学习页面" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#00FF00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-86"><mxGeometry x="-0.1855" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-94" value="&lt;font style=&quot;font-size: 16px&quot; color=&quot;#000000&quot;&gt;学生课程班型素材锁&lt;/font&gt;" style="points=[[0.5,0,0],[1,0.5,0],[0.5,1,0],[0,0.5,0],[0.145,0.145,0],[0.8555,0.145,0],[0.855,0.8555,0],[0.145,0.855,0]];verticalLabelPosition=bottom;html=1;verticalAlign=top;aspect=fixed;align=center;pointerEvents=1;shape=mxgraph.cisco19.lock;fillColor=#005073;strokeColor=none;labelBackgroundColor=none;fontColor=#00FF00;" vertex="1" parent="1"><mxGeometry x="2550" y="370" width="50" height="50" as="geometry"/></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-97" value="" style="endArrow=classic;html=1;strokeColor=#00FF00;fontColor=#00FF00;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-72" target="R5F-jyJuNegEA1YtVJ6C-94"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1000" y="600" as="sourcePoint"/><mxPoint x="1050" y="550" as="targetPoint"/><Array as="points"><mxPoint x="1450" y="50"/><mxPoint x="2050" y="160"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-101" value="获取锁" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#00FF00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-97"><mxGeometry x="0.5274" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-99" value="" style="endArrow=classic;html=1;fontColor=#00FF00;entryX=-0.06;entryY=0.66;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="ey-oF8YSq9swC0SQ6pQ9-14" target="R5F-jyJuNegEA1YtVJ6C-94"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="2310" y="530" as="sourcePoint"/><mxPoint x="2360" y="480" as="targetPoint"/><Array as="points"><mxPoint x="2030" y="450"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-100" value="获取锁" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-99"><mxGeometry x="0.4669" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-102" value="" style="endArrow=classic;html=1;fontColor=#00FF00;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#E89B00;" edge="1" parent="1" source="R5F-jyJuNegEA1YtVJ6C-65" target="R5F-jyJuNegEA1YtVJ6C-94"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1380" y="1510" as="sourcePoint"/><mxPoint x="2040" y="750" as="targetPoint"/><Array as="points"><mxPoint x="2960" y="1820"/></Array></mxGeometry></mxCell><mxCell id="R5F-jyJuNegEA1YtVJ6C-103" value="获取锁" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#E89B00;" vertex="1" connectable="0" parent="R5F-jyJuNegEA1YtVJ6C-102"><mxGeometry x="0.8302" y="-1" relative="1" as="geometry"><mxPoint y="-1" as="offset"/></mxGeometry></mxCell></root></mxGraphModel>